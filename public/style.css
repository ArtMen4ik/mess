/* =========================================================
   БАЗОВЫЕ ПЕРЕМЕННЫЕ ТЕМЫ (цвета, тени, радиусы)
   ========================================================= */
:root {
  --bg: #0f172a;          /* фон страницы (slate-900) */
  --panel: #0b1221;       /* фон панелей */
  --panel-2: #0a0f1c;     /* вторичный фон */
  --border: #1f2937;      /* границы */
  --text: #e5e7eb;        /* основной текст */
  --muted: #94a3b8;       /* вторичный текст */
  --accent: #60a5fa;      /* акцент (кнопки/ссылки) */
  --accent-2: #38bdf8;    /* акцент-градиент */
  --mine: #22c55e;        /* цвет «моих» сообщений */
  --other: #334155;       /* цвет «чужих» сообщений */
  --warn: #f59e0b;        /* системные сообщения/подсказки */
  --error: #ef4444;       /* ошибки */
  --radius: 16px;         /* общий радиус скругления */
  --shadow: 0 8px 24px rgba(0,0,0,.35);
}

/* =========================================================
   БАЗОВЫЕ СБРОСЫ И ТИПОГРАФИКА
   ========================================================= */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
  background: radial-gradient(1200px 600px at 15% -10%, #1e293b 0%, var(--panel-2) 60%, #070b14 100%);
  color: var(--text);
  line-height: 1.5;
}

/* Утилиты текста */
.muted { color: var(--muted); }

/* =========================================================
   КОНТЕЙНЕР СТРАНИЦЫ И ОСНОВНАЯ СЕТКА
   ========================================================= */
.container {
  max-width: 920px;
  margin: 0 auto;
  padding: 12px;
  min-height: 100dvh;

  /* Гибкая колонка: шапка → контент → футер */
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* =========================================================
   ШАПКА
   ========================================================= */
.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: linear-gradient(180deg, #0f172a, var(--panel));
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}

.brand {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 700;
  letter-spacing: .2px;
}

.user-note {
  margin: 0;
  color: var(--muted);
  font-size: 0.9rem;
}

/* =========================================================
   ГЛАВНЫЙ КОНТЕНТ (ГРИД-СЕКЦИИ)
   ========================================================= */
.app {
  /* Grid для секций: login, chat, composer */
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px;
}

/* Каждый логический блок */
.section {
  background: linear-gradient(180deg, var(--panel-2), #0d1325 60%);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 12px;
}

/* =========================================================
   ОКНО ЧАТА
   ========================================================= */
.chat-window {
  height: min(56vh, 560px);
  min-height: 260px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 8px;
  background: linear-gradient(180deg, #0a0f1c, #0d1325 60%);
  border: 1px solid var(--border);
  border-radius: calc(var(--radius) - 4px);
  scroll-behavior: smooth;
}

/* Системные сообщения (вход/выход, ошибки, статусы) */
.system {
  align-self: center;
  color: var(--warn);
  background: rgba(245, 158, 11, .08);
  border: 1px dashed rgba(245, 158, 11, .35);
  padding: 6px 10px;
  border-radius: 999px;
  font-size: .9rem;
  box-shadow: 0 6px 20px rgba(0,0,0,.12);
}

/* Карточка сообщения (заранее: для будущего JS-рендера) */
.message {
  display: flex;
  flex-direction: column;
  max-width: 78%;
  gap: 6px;
  animation: fadeInUp .25s ease both;
}

/* Выравнивание своих/чужих сообщений */
.message.mine   { align-self: flex-end;  }
.message.other  { align-self: flex-start; }

/* Пузырь сообщения */
.bubble {
  padding: 10px 12px;
  border-radius: 16px;
  border: 1px solid var(--border);
  background: var(--other);
  box-shadow: 0 6px 20px rgba(0,0,0,.25);
  word-wrap: break-word;
  overflow-wrap: anywhere;
}

/* Цвет своей реплики */
.message.mine .bubble {
  background: linear-gradient(180deg, rgba(34,197,94,.18), rgba(34,197,94,.10));
  border-color: rgba(34,197,94,.35);
}

/* Метаданные: автор/время */
.meta {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: .78rem;
  color: var(--muted);
  margin: 0 2px;
}

.meta .author { font-weight: 600; }
.meta .time   { opacity: .85; }

/* Индикатор набора текста */
.typing-indicator {
  margin-top: 6px;
  color: var(--muted);
  font-size: 0.95rem;
  padding-left: 4px;
}

/* =========================================================
   ФОРМЫ (ВХОД И ОТПРАВКА СООБЩЕНИЯ)
   ========================================================= */
.form {
  display: flex;
  gap: 10px;
  align-items: center;
  background: linear-gradient(180deg, #0f172a, var(--panel));
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 10px;
}

/* Форма логина — колонкой */
.form-login {
  flex-direction: column;
  align-items: stretch;
  gap: 8px;
}

.form-login .row {
  display: flex;
  gap: 10px;
}

.label {
  font-size: .95rem;
}

.hint {
  margin: 0;
  color: var(--muted);
  font-size: .85rem;
}

/* Поля ввода */
.input {
  flex: 1;
  min-width: 0;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid #253045;
  background: #0a1222;
  color: var(--text);
  outline: none;
  transition: border-color .15s ease, box-shadow .15s ease;
}

.input::placeholder { color: #667085; }

.input:focus {
  border-color: rgba(56,189,248,.6);
  box-shadow: 0 0 0 3px rgba(56,189,248,.15);
}

/* Кнопки */
.btn {
  border: none;
  border-radius: 12px;
  padding: 10px 14px;
  background: linear-gradient(180deg, var(--accent), var(--accent-2));
  color: #071018;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 8px 18px rgba(56,189,248,.25);
  transition: transform .08s ease, filter .15s ease;
  white-space: nowrap;
}

.btn:active { transform: translateY(1px); }
.btn:disabled {
  opacity: .6;
  cursor: not-allowed;
  filter: grayscale(.3);
}

/* =========================================================
   ФУТЕР
   ========================================================= */
.footer {
  display: flex;
  justify-content: center;
  padding: 8px 12px;
  color: var(--muted);
  font-size: .9rem;
}

/* =========================================================
   АНИМАЦИИ
   ========================================================= */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(6px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* =========================================================
   АДАПТИВНОСТЬ (МОБИЛЬНЫЕ УСТРОЙСТВА)
   ========================================================= */
@media (max-width: 640px) {
  .brand { font-size: 1rem; }
  .form-login .row { flex-direction: column; }
  .chat-window { height: min(56vh, 70dvh); }
  .message { max-width: 92%; }
}

/* =========================================================
   ПОЛЕЗНЫЕ УТИЛИТЫ (НЕОБЯЗАТЕЛЬНО)
   ========================================================= */
.hidden { display: none !important; }
.error  { color: var(--error); }



/* =========================================================
   СООБЩЕНИЯ: СТОРОНЫ, АНИМАЦИИ, МЕТАДАННЫЕ, РАЗДЕЛИТЕЛИ
   ========================================================= */

/* Базовый контейнер сообщения (+ мягкая тень и hover-эффект) */
.message {
  position: relative;
  gap: 6px;
  transition: transform .12s ease, box-shadow .18s ease, background-color .18s ease;
}
.message:hover .bubble {
  box-shadow: 0 10px 24px rgba(0,0,0,.28);
  transform: translateY(-1px);
}

/* Стороны: выравниваем и ограничиваем ширину */
.message.mine   { align-self: flex-end;  max-width: min(78%, 640px); }
.message.other  { align-self: flex-start; max-width: min(78%, 640px); }

/* Пузырь + хвостики (разные стороны) */
.bubble {
  position: relative;
  border-radius: 16px;
  transition: transform .12s ease, box-shadow .18s ease, background-color .18s ease, border-color .18s ease;
}

.message.mine .bubble::after,
.message.other .bubble::after{
  content: "";
  position: absolute;
  bottom: 0.35rem;
  width: 10px; height: 10px;
  transform: rotate(45deg);
  background: inherit;            /* хвост той же заливки */
  border: inherit;                 /* и те же границы */
  border-top-color: transparent;   /* скрываем верх/лево/право как нужно */
  border-left-color: transparent;
}

.message.mine .bubble::after{
  right: -5px;
  border-right-color: transparent;
}
.message.other .bubble::after{
  left: -5px;
  border-left-color: transparent;
}

/* Цвета пузырей (ещё выразительнее) */
.message.other .bubble{
  background: linear-gradient(180deg, #172036, #10182b);
  border-color: #21304a;
}
.message.mine .bubble{
  background: linear-gradient(180deg, rgba(34,197,94,.22), rgba(34,197,94,.12));
  border-color: rgba(34,197,94,.42);
}

/* Метаданные: имя и время, аккуратная точка-разделитель */
.meta{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: .78rem;
  color: var(--muted);
  margin: 2px 4px 0;
  user-select: none;
}

.meta .author{
  font-weight: 700;
  letter-spacing: .2px;
  color: #d7e3f2;
  opacity: .95;
}
.meta .time{
  opacity: .8;
}
.meta .dot::before{
  content: "•";
  opacity: .6;
}

/* Плавные анимации появления (учитываем сторону) */
@keyframes slideInRight {
  from { opacity: 0; transform: translate3d(16px, 6px, 0) scale(.98); }
  to   { opacity: 1; transform: translate3d(0, 0, 0) scale(1); }
}
@keyframes slideInLeft {
  from { opacity: 0; transform: translate3d(-16px, 6px, 0) scale(.98); }
  to   { opacity: 1; transform: translate3d(0, 0, 0) scale(1); }
}

/* Применяем разную анимацию в зависимости от стороны */
.message.mine   { animation: slideInRight .22s cubic-bezier(.2,.8,.25,1) both; }
.message.other  { animation: slideInLeft  .22s cubic-bezier(.2,.8,.25,1) both; }

/* Визуальное разделение сообщений разных пользователей
   (добавляем больший вертикальный зазор при смене стороны) */
.message.mine + .message.other,
.message.other + .message.mine {
  margin-top: 14px;
}

/* Дополнительный мягкий разделитель между репликами одного автора */
.message + .message {
  margin-top: 6px;
}

/* Аватар/инициалы (необязательно, на будущее) */
.message .avatar{
  width: 28px; height: 28px;
  border-radius: 50%;
  background: #1b253a;
  border: 1px solid #22324e;
  display: none; /* включите display:inline-block в разметке при необходимости */
}

/* Уважение к настройкам доступности: уменьшаем движение */
@media (prefers-reduced-motion: reduce){
  .message,
  .bubble{
    transition: none !important;
    animation: none !important;
  }
}